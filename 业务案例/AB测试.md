AB测试
===
Index
---
- [AB测试分流机制](#AB测试分流机制)
- [业务评估案例](#业务评估案例)
- [AB测试假设检验(T检验)](#AB测试假设检验(T检验))
- [假设检验常见术语](#假设检验常见术语)
- [Reference](#Reference)

## AB测试分流机制
- 定义<br>
A / B测试（桶测试或分流测试）是一个**随机实验**，通常有**两个变体，A和B**。利用**控制变量法保持有单一变量**的前提下，将A、B数据进行对比，得出实验结论
- AB实验模板
  - 域
  - 层
  - 流
- 分层、分流规则<br/>
![示例图片](../图片/分层分流规则.jpg)<br/>
  - 规则详述<br/>
分流(分域)遵循[互斥实验](./AB测试.md)：如域1和域2是互斥的，B1-1，B1-2，B1-3之间又是互斥的<br/>
分层遵循[正交实验](./AB测试.md)：如B1层、B2层、B3层的流量是正交的<br/>
分域的目的：不受其他任何实验的干扰<br/>
  - 注意点<br/>
不同层遵循**无任何的业务关联度规则**<br/>
- 两种实验
  - 正交实验：每个独立实验为一层，层与层之间流量是正交的，一份流量**穿越**每层实验时，都会**再次随机打散**
  - 互斥实验：实验在同一层拆分流量，且不论如何拆分，不同组的流量是**不重叠(互斥)的**
## 业务评估案例
![示例图](../图片/AB测试评估示例.jpg)
## AB测试假设检验(T检验)
- 模板<br/>
![示例图](../图片/Z统计量.png)<br/>
  - 原假设：实验组均值与对照组均值相等
  - 构造Z统计量：**中心极限定理** -> 样本均值的抽样分布服从**正态分布**（均值p, 方差pq/n,因为总体服从**伯努利分布**） -> 构造的**Z统计量符合正态分布**(均值p1-q1, 方差p1*q1/n1+p2*q2/n2)，所以可以和标准正态分布理论值进行比较<br/>
  - 显著性判断
    - 点估计显著性判断：比较Z值和理论值（或比较p-value和alpha值，后者是前者在**面积** 层面的比较），确定是否显著
    - 区间估计显著性判断：<br/>
    置信区间上下限**同为正**,**统计显著**，**试验版本优于对照版本**<br/>
    置信区间上下限**同为负**，**统计显著**，**对照版本优于试验版本**<br/>
    置信区间上下限**一正一负**，**版本间差异不大**
- 陷阱
  - n1,n2非常大陷阱：Z检验的结果**容易显著（敏感区）**，因为分母会趋向0
  - n1,n2非常小陷阱：Z检验的结果**很难显著（不敏感区）**，因为分母会趋向一个很大的值
- (X%)置信区间
  - 计算公式<br/>
  [均值 - 分布理论值 x 标准差, 均值 + 分布理论值 x 标准差]<br/>
  如下图中正态分布的95%置信区间<br/>
  ![示例图](../图片/置信区间示例1.png)<br/>
  ![实力如](../图片/置信区间示例2.png)<br/>
## 假设检验常见术语
- 第一(二)类错误：alpha(beta)<br/>
alpha:人为设定的**阈值**,用来控制犯第一类错误的概率，对应**拒绝域**
- 显著性水平：p-value,由 **（样本数据，假设检验方式）** 计算得到，与alpha比较<br/>
p-value <= alpha, 则拒绝原假设<br/>
p-value > alpha, 则接受原假设<br/>
- 置信水平：1-alpha
- (X%)置信区间：区间估计的样本均值范围，该范围有X%的概率包含总体参数，X%=1-alpha
- 功效分析



## Reference
- [一文搞懂AB Testing的分层分流](http://www.woshipm.com/pd/1080730.html)
- [复盘：如何从0~1搭建AB Test系统](http://www.woshipm.com/pd/2425383.html)
- [增长策略：如何用AB测试进行活动评估及优化？](http://www.woshipm.com/pd/2078040.html)
- [你的A/B测试结果真的靠谱吗？](http://www.woshipm.com/data-analysis/2207880.html)
- [你的A/B测试结果有多靠谱？](http://www.woshipm.com/data-analysis/2207880.html)
- [样本均值的抽样分布](https://baike.baidu.com/item/%E6%A0%B7%E6%9C%AC%E5%9D%87%E5%80%BC%E7%9A%84%E6%8A%BD%E6%A0%B7%E5%88%86%E5%B8%83/7181356?fr=aladdin)
- 《A/B测试与统计学300题》
- [老司机的行业经验分享：A/B测试的五大误区](http://www.woshipm.com/data-analysis/498087.html)
- [增长黑客进阶之路：关于A/A测试，看这篇文章就够了](http://www.woshipm.com/data-analysis/427086.html)
- [【A/B测试算法大揭秘】第五篇：少了它，版本决策将毫无意义](http://www.woshipm.com/pmd/394039.html)
- [如何使用A/A测试，让数据更准确？](http://www.woshipm.com/data-analysis/438269.html)
- [A/B测试算法大揭秘 | 一切都从这个定理开始](http://www.woshipm.com/operate/376703.html)
- [A/B测试算法揭秘第二篇：如何分析试验数据（上）
](http://www.woshipm.com/pmd/380883.html)
- [A/B测试算法大揭秘第三篇：如何分析试验数据（下）
](http://www.woshipm.com/operate/385200.html)
- []()
